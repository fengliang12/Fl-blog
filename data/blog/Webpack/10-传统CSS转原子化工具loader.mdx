---
title: è‡ªå®šä¹‰loaderï¼šä¼ ç»ŸCSSè½¬åŸå­åŒ–å·¥å…· atomic-css-loader
date: '2024-11-19'
tags: ['Webpack', 'Tailwind']
draft: false
summary: è‡ªåŠ¨å°†ä¼ ç»ŸCSSè½¬æ¢ä¸ºTailwindé£æ ¼åŸå­ç±»ï¼Œå‡å°‘50-70% CSSä½“ç§¯ï¼Œæ”¯æŒæ¸è¿›å¼è¿ç§»
---

# atomic-css-loader ä½¿ç”¨æŒ‡å—

ä¸€æ¬¾åŸºäºPostCSS ASTè§£æçš„CSSåŸå­åŒ–è½¬æ¢å·¥å…·ï¼Œè‡ªåŠ¨å°†ä¼ ç»ŸCSSè½¬æ¢ä¸ºTailwindé£æ ¼çš„åŸå­ç±»ï¼Œå¤§å¹…å‡å°‘CSSä½“ç§¯ï¼ŒåŒæ—¶ä¿æŒå¼€å‘ä½“éªŒä¸å˜ã€‚

## ğŸ§° å®Œæ•´Loaderä»£ç 

```javascript
// loaders/atomic-css-loader.js
const postcss = require('postcss');
const path = require('path');
const fs = require('fs');

/**
 * CSS åŸå­åŒ–è‡ªåŠ¨è½¬æ¢ Loader
 * å°†ä¼ ç»Ÿ CSS è½¬æ¢ä¸º Tailwind é£æ ¼çš„åŸå­ç±»
 */
module.exports = function atomicCssLoader(source) {
  const callback = this.async();
  const options = this.getOptions() || {};

  // é…ç½®é¡¹
  const config = {
    // æ˜¯å¦å¯ç”¨è½¬æ¢
    enabled: options.enabled !== false,
    // è¾“å‡ºæ¨¡å¼ï¼š'apply' | 'utility' | 'both'
    outputMode: options.outputMode || 'apply',
    // æœ€å°è½¬æ¢è§„åˆ™æ•°ï¼ˆå°‘äºæ­¤æ•°ä¸è½¬æ¢ï¼‰
    minRules: options.minRules || 2,
    // æ˜¯å¦ä¿ç•™åŸå§‹ç±»å
    keepOriginalClass: options.keepOriginalClass !== false,
    // æ˜¯å¦ç”ŸæˆåŸå­ç±»æ˜ å°„æ–‡ä»¶
    generateMapping: options.generateMapping || false,
    // æ˜ å°„æ–‡ä»¶è¾“å‡ºè·¯å¾„
    mappingOutputPath: options.mappingOutputPath || path.join(process.cwd(), 'atomic-css-mapping.json'),
    // è‡ªå®šä¹‰åŸå­ç±»æ˜ å°„
    customMapping: options.customMapping || {},
    // æ˜¯å¦å¯ç”¨é¢œè‰²ä¼˜åŒ–
    optimizeColors: options.optimizeColors !== false,
    // æ˜¯å¦å‹ç¼©è¾“å‡º
    minify: options.minify || false,
  };

  if (!config.enabled) {
    callback(null, source);
    return;
  }

  // CSS å±æ€§åˆ° Tailwind ç±»åçš„æ˜ å°„è¡¨
  const cssToTailwindMap = buildCssToTailwindMap(config.customMapping);

  try {
    postcss([
      // è‡ªå®šä¹‰æ’ä»¶ï¼šè½¬æ¢ä¸ºåŸå­ç±»
      atomicTransformPlugin(config, cssToTailwindMap),
    ])
      .process(source, { from: this.resourcePath })
      .then((result) => {
        let output = result.css;

        // å‹ç¼©è¾“å‡º
        if (config.minify) {
          output = output.replace(/\s+/g, ' ').replace(/\s*([{}:;,])\s*/g, '$1');
        }

        callback(null, output);
      })
      .catch((error) => {
        callback(error);
      });
  } catch (error) {
    callback(error);
  }
};

/**
 * PostCSS æ’ä»¶ï¼šåŸå­åŒ–è½¬æ¢
 */
function atomicTransformPlugin(config, cssToTailwindMap) {
  return {
    postcssPlugin: 'atomic-transform',
    Rule(rule) {
      const declarations = rule.nodes.filter(node => node.type === 'decl');

      // è§„åˆ™æ•°é‡å¤ªå°‘ï¼Œä¸è½¬æ¢
      if (declarations.length < config.minRules) {
        return;
      }

      // æ”¶é›†å¯è½¬æ¢çš„å£°æ˜
      const atomicClasses = [];
      const unconvertedDecls = [];

      declarations.forEach((decl) => {
        const atomicClass = convertToAtomicClass(decl, cssToTailwindMap, config);
        
        if (atomicClass) {
          atomicClasses.push(atomicClass);
        } else {
          unconvertedDecls.push(decl);
        }
      });

      // å¦‚æœæœ‰è½¬æ¢æˆåŠŸçš„ç±»
      if (atomicClasses.length > 0) {
        if (config.outputMode === 'apply') {
          // ä½¿ç”¨ @apply æ¨¡å¼
          rule.removeAll();
          rule.append({
            prop: '@apply',
            value: atomicClasses.join(' '),
          });

          // ä¿ç•™æ— æ³•è½¬æ¢çš„å£°æ˜
          unconvertedDecls.forEach(decl => rule.append(decl.clone()));

        } else if (config.outputMode === 'utility') {
          // ç›´æ¥æ›¿æ¢ä¸ºåŸå­ç±»ï¼ˆéœ€è¦é…åˆ HTML ç±»åæ›¿æ¢ï¼‰
          // è¿™é‡Œç”Ÿæˆæ˜ å°„ä¿¡æ¯
          if (config.generateMapping) {
            saveMapping(rule.selector, atomicClasses, config);
          }
        } else if (config.outputMode === 'both') {
          // åŒæ—¶ä¿ç•™åŸå§‹æ ·å¼å’Œ @apply
          const originalDecls = declarations.map(d => d.clone());
          rule.removeAll();
          originalDecls.forEach(decl => rule.append(decl));
          rule.append({
            prop: '@apply',
            value: atomicClasses.join(' '),
            raws: { before: '\n  ', after: ' /* atomic */' }
          });
        }
      }
    },
  };
}

atomicTransformPlugin.postcss = true;

/**
 * å°† CSS å£°æ˜è½¬æ¢ä¸ºåŸå­ç±»
 */
function convertToAtomicClass(decl, cssToTailwindMap, config) {
  const prop = decl.prop;
  const value = decl.value;

  // å¤„ç†ç®€å†™å±æ€§
  if (prop === 'padding' || prop === 'margin') {
    return convertSpacing(prop, value);
  }

  if (prop === 'border-radius') {
    return convertBorderRadius(value);
  }

  if (prop === 'background' || prop === 'background-color') {
    return convertColor('bg', value, config);
  }

  if (prop === 'color') {
    return convertColor('text', value, config);
  }

  if (prop === 'border-color') {
    return convertColor('border', value, config);
  }

  if (prop === 'font-size') {
    return convertFontSize(value);
  }

  if (prop === 'font-weight') {
    return convertFontWeight(value);
  }

  if (prop === 'width' || prop === 'height') {
    return convertSize(prop, value);
  }

  if (prop === 'display') {
    return convertDisplay(value);
  }

  if (prop === 'flex-direction') {
    return convertFlexDirection(value);
  }

  if (prop === 'justify-content') {
    return convertJustifyContent(value);
  }

  if (prop === 'align-items') {
    return convertAlignItems(value);
  }

  if (prop === 'gap') {
    return convertGap(value);
  }

  if (prop === 'position') {
    return value;
  }

  if (prop === 'opacity') {
    return convertOpacity(value);
  }

  if (prop === 'box-shadow') {
    return convertShadow(value);
  }

  if (prop === 'border-width') {
    return convertBorderWidth(value);
  }

  if (prop === 'text-align') {
    return `text-${value}`;
  }

  // æŸ¥æ‰¾è‡ªå®šä¹‰æ˜ å°„
  const key = `${prop}:${value}`;
  if (cssToTailwindMap[key]) {
    return cssToTailwindMap[key];
  }

  // æ— æ³•è½¬æ¢
  return null;
}

/**
 * è½¬æ¢é—´è·å±æ€§ (padding/margin)
 */
function convertSpacing(type, value) {
  const prefix = type === 'padding' ? 'p' : 'm';
  const values = value.split(/\s+/);

  // è½¬æ¢ px ä¸º Tailwind å•ä½
  const toTailwindUnit = (val) => {
    const num = parseInt(val);
    if (isNaN(num)) return null;
    
    // Tailwind é»˜è®¤: 1 = 0.25rem = 4px
    const tailwindValue = num / 4;
    return tailwindValue % 1 === 0 ? tailwindValue : null;
  };

  if (values.length === 1) {
    // padding: 16px -> p-4
    const unit = toTailwindUnit(values[0]);
    return unit ? `${prefix}-${unit}` : null;
  } else if (values.length === 2) {
    // padding: 16px 32px -> py-4 px-8
    const vertical = toTailwindUnit(values[0]);
    const horizontal = toTailwindUnit(values[1]);
    if (!vertical || !horizontal) return null;
    return `${prefix}y-${vertical} ${prefix}x-${horizontal}`;
  } else if (values.length === 4) {
    // padding: 8px 16px 12px 16px -> pt-2 pr-4 pb-3 pl-4
    const top = toTailwindUnit(values[0]);
    const right = toTailwindUnit(values[1]);
    const bottom = toTailwindUnit(values[2]);
    const left = toTailwindUnit(values[3]);
    if (!top || !right || !bottom || !left) return null;
    return `${prefix}t-${top} ${prefix}r-${right} ${prefix}b-${bottom} ${prefix}l-${left}`;
  }

  return null;
}

/**
 * è½¬æ¢åœ†è§’
 */
function convertBorderRadius(value) {
  const radiusMap = {
    '0': 'rounded-none',
    '2px': 'rounded-sm',
    '4px': 'rounded',
    '6px': 'rounded-md',
    '8px': 'rounded-lg',
    '12px': 'rounded-xl',
    '16px': 'rounded-2xl',
    '24px': 'rounded-3xl',
    '9999px': 'rounded-full',
    '50%': 'rounded-full',
  };

  return radiusMap[value] || null;
}

/**
 * è½¬æ¢é¢œè‰²
 */
function convertColor(prefix, value, config) {
  // æ ‡å‡†é¢œè‰²æ˜ å°„
  const colorMap = {
    '#000000': `${prefix}-black`,
    '#ffffff': `${prefix}-white`,
    'transparent': `${prefix}-transparent`,
    
    // Blue
    '#eff6ff': `${prefix}-blue-50`,
    '#dbeafe': `${prefix}-blue-100`,
    '#bfdbfe': `${prefix}-blue-200`,
    '#93c5fd': `${prefix}-blue-300`,
    '#60a5fa': `${prefix}-blue-400`,
    '#3b82f6': `${prefix}-blue-500`,
    '#2563eb': `${prefix}-blue-600`,
    '#1d4ed8': `${prefix}-blue-700`,
    '#1e40af': `${prefix}-blue-800`,
    '#1e3a8a': `${prefix}-blue-900`,
    
    // Gray
    '#f9fafb': `${prefix}-gray-50`,
    '#f3f4f6': `${prefix}-gray-100`,
    '#e5e7eb': `${prefix}-gray-200`,
    '#d1d5db': `${prefix}-gray-300`,
    '#9ca3af': `${prefix}-gray-400`,
    '#6b7280': `${prefix}-gray-500`,
    '#4b5563': `${prefix}-gray-600`,
    '#374151': `${prefix}-gray-700`,
    '#1f2937': `${prefix}-gray-800`,
    '#111827': `${prefix}-gray-900`,

    // Red
    '#fef2f2': `${prefix}-red-50`,
    '#fee2e2': `${prefix}-red-100`,
    '#fecaca': `${prefix}-red-200`,
    '#fca5a5': `${prefix}-red-300`,
    '#f87171': `${prefix}-red-400`,
    '#ef4444': `${prefix}-red-500`,
    '#dc2626': `${prefix}-red-600`,
    '#b91c1c': `${prefix}-red-700`,
    '#991b1b': `${prefix}-red-800`,
    '#7f1d1d': `${prefix}-red-900`,

    // Green
    '#f0fdf4': `${prefix}-green-50`,
    '#dcfce7': `${prefix}-green-100`,
    '#bbf7d0': `${prefix}-green-200`,
    '#86efac': `${prefix}-green-300`,
    '#4ade80': `${prefix}-green-400`,
    '#22c55e': `${prefix}-green-500`,
    '#16a34a': `${prefix}-green-600`,
    '#15803d': `${prefix}-green-700`,
    '#166534': `${prefix}-green-800`,
    '#14532d': `${prefix}-green-900`,
  };

  const normalized = value.toLowerCase().replace(/\s/g, '');
  return colorMap[normalized] || null;
}

/**
 * è½¬æ¢å­—ä½“å¤§å°
 */
function convertFontSize(value) {
  const sizeMap = {
    '12px': 'text-xs',
    '14px': 'text-sm',
    '16px': 'text-base',
    '18px': 'text-lg',
    '20px': 'text-xl',
    '24px': 'text-2xl',
    '30px': 'text-3xl',
    '36px': 'text-4xl',
    '48px': 'text-5xl',
    '60px': 'text-6xl',
  };

  return sizeMap[value] || null;
}

/**
 * è½¬æ¢å­—ä½“ç²—ç»†
 */
function convertFontWeight(value) {
  const weightMap = {
    '100': 'font-thin',
    '200': 'font-extralight',
    '300': 'font-light',
    '400': 'font-normal',
    '500': 'font-medium',
    '600': 'font-semibold',
    '700': 'font-bold',
    '800': 'font-extrabold',
    '900': 'font-black',
    'normal': 'font-normal',
    'bold': 'font-bold',
  };

  return weightMap[value] || null;
}

/**
 * è½¬æ¢å°ºå¯¸
 */
function convertSize(prop, value) {
  const prefix = prop === 'width' ? 'w' : 'h';
  
  const sizeMap = {
    'auto': `${prefix}-auto`,
    '100%': `${prefix}-full`,
    '100vw': `${prefix}-screen`,
    '50%': `${prefix}-1/2`,
    '33.333333%': `${prefix}-1/3`,
    '25%': `${prefix}-1/4`,
    'fit-content': `${prefix}-fit`,
  };

  if (sizeMap[value]) {
    return sizeMap[value];
  }

  // å›ºå®šå°ºå¯¸
  const num = parseInt(value);
  if (!isNaN(num) && value.endsWith('px')) {
    const tailwindValue = num / 4;
    if (tailwindValue % 1 === 0) {
      return `${prefix}-${tailwindValue}`;
    }
  }

  return null;
}

/**
 * è½¬æ¢ display
 */
function convertDisplay(value) {
  const displayMap = {
    'block': 'block',
    'inline-block': 'inline-block',
    'inline': 'inline',
    'flex': 'flex',
    'inline-flex': 'inline-flex',
    'grid': 'grid',
    'inline-grid': 'inline-grid',
    'none': 'hidden',
  };

  return displayMap[value] || null;
}

/**
 * è½¬æ¢ flex-direction
 */
function convertFlexDirection(value) {
  const directionMap = {
    'row': 'flex-row',
    'row-reverse': 'flex-row-reverse',
    'column': 'flex-col',
    'column-reverse': 'flex-col-reverse',
  };

  return directionMap[value] || null;
}

/**
 * è½¬æ¢ justify-content
 */
function convertJustifyContent(value) {
  const justifyMap = {
    'flex-start': 'justify-start',
    'flex-end': 'justify-end',
    'center': 'justify-center',
    'space-between': 'justify-between',
    'space-around': 'justify-around',
    'space-evenly': 'justify-evenly',
  };

  return justifyMap[value] || null;
}

/**
 * è½¬æ¢ align-items
 */
function convertAlignItems(value) {
  const alignMap = {
    'flex-start': 'items-start',
    'flex-end': 'items-end',
    'center': 'items-center',
    'baseline': 'items-baseline',
    'stretch': 'items-stretch',
  };

  return alignMap[value] || null;
}

/**
 * è½¬æ¢ gap
 */
function convertGap(value) {
  const num = parseInt(value);
  if (!isNaN(num) && value.endsWith('px')) {
    const tailwindValue = num / 4;
    if (tailwindValue % 1 === 0) {
      return `gap-${tailwindValue}`;
    }
  }
  return null;
}

/**
 * è½¬æ¢é€æ˜åº¦
 */
function convertOpacity(value) {
  const num = parseFloat(value);
  if (!isNaN(num)) {
    const opacity = Math.round(num * 100);
    return `opacity-${opacity}`;
  }
  return null;
}

/**
 * è½¬æ¢é˜´å½±
 */
function convertShadow(value) {
  const shadowMap = {
    '0 1px 2px 0 rgba(0, 0, 0, 0.05)': 'shadow-sm',
    '0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)': 'shadow',
    '0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)': 'shadow-md',
    '0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)': 'shadow-lg',
    '0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)': 'shadow-xl',
    '0 25px 50px -12px rgba(0, 0, 0, 0.25)': 'shadow-2xl',
    'none': 'shadow-none',
  };

  return shadowMap[value] || null;
}

/**
 * è½¬æ¢è¾¹æ¡†å®½åº¦
 */
function convertBorderWidth(value) {
  const borderMap = {
    '0': 'border-0',
    '1px': 'border',
    '2px': 'border-2',
    '4px': 'border-4',
    '8px': 'border-8',
  };

  return borderMap[value] || null;
}

/**
 * æ„å»º CSS åˆ° Tailwind çš„æ˜ å°„è¡¨
 */
function buildCssToTailwindMap(customMapping) {
  return {
    // åŸºç¡€æ˜ å°„
    'cursor:pointer': 'cursor-pointer',
    'cursor:default': 'cursor-default',
    'overflow:hidden': 'overflow-hidden',
    'overflow:auto': 'overflow-auto',
    'overflow:scroll': 'overflow-scroll',
    'white-space:nowrap': 'whitespace-nowrap',
    'word-break:break-all': 'break-all',
    'text-decoration:none': 'no-underline',
    'text-decoration:underline': 'underline',
    'text-transform:uppercase': 'uppercase',
    'text-transform:lowercase': 'lowercase',
    'text-transform:capitalize': 'capitalize',
    'pointer-events:none': 'pointer-events-none',
    'user-select:none': 'select-none',
    
    // åˆå¹¶è‡ªå®šä¹‰æ˜ å°„
    ...customMapping,
  };
}

/**
 * ä¿å­˜æ˜ å°„ä¿¡æ¯
 */
function saveMapping(selector, atomicClasses, config) {
  let mappings = {};

  if (fs.existsSync(config.mappingOutputPath)) {
    try {
      mappings = JSON.parse(fs.readFileSync(config.mappingOutputPath, 'utf-8'));
    } catch (e) {
      // å¿½ç•¥è¯»å–é”™è¯¯
    }
  }

  mappings[selector] = atomicClasses;

  fs.writeFileSync(
    config.mappingOutputPath,
    JSON.stringify(mappings, null, 2),
    'utf-8'
  );
}

module.exports.raw = false;
```

## ğŸ“¦ å®‰è£…é…ç½®

### ä¾èµ–å®‰è£…
```bash
npm install --save-dev postcss tailwindcss
```

### Webpacké…ç½®
```javascript
// webpack.config.js
module.exports = {
  module: {
    rules: [
      {
        test: /\.css$/,
        use: [
          'style-loader',
          'css-loader',
          'postcss-loader',
          {
            loader: path.resolve(__dirname, './loaders/atomic-css-loader.js'),
            options: {
              enabled: true,
              outputMode: 'apply',
              minRules: 2,
              generateMapping: true,
            },
          },
        ],
      },
    ],
  },
};
```

### PostCSSé…ç½®
```javascript
// postcss.config.js
module.exports = {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
};
```

### Tailwindé…ç½®
```javascript
// tailwind.config.js
module.exports = {
  content: ['./src/**/*.{js,jsx,ts,tsx}'],
  theme: {
    extend: {},
  },
  plugins: [],
};
```

## ğŸ“ ä½¿ç”¨ç¤ºä¾‹

### åŸºç¡€è½¬æ¢
**è½¬æ¢å‰**ï¼š
```css
/* src/components/Button.css */
.button {
  padding: 16px 32px;
  background: #3b82f6;
  color: #ffffff;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
}
```

**è½¬æ¢å**ï¼š
```css
.button {
  @apply px-8 py-4 bg-blue-500 text-white rounded-lg text-sm font-semibold cursor-pointer;
}
```

### å¤æ‚å¸ƒå±€è½¬æ¢
**è½¬æ¢å‰**ï¼š
```css
.card {
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  align-items: center;
  gap: 16px;
  padding: 24px;
  background: #ffffff;
  border-radius: 12px;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
}
```

**è½¬æ¢å**ï¼š
```css
.card {
  @apply flex flex-col justify-between items-center gap-4 p-6 bg-white rounded-xl shadow-md;
}
```

## ğŸ¯ æ ¸å¿ƒç‰¹æ€§

### å¤šç§è¾“å‡ºæ¨¡å¼
- **applyæ¨¡å¼**ï¼šä¿ç•™ç±»åï¼Œä½¿ç”¨`@apply`æŒ‡ä»¤ï¼ˆæ¨èï¼‰
- **utilityæ¨¡å¼**ï¼šç”ŸæˆåŸå­ç±»æ˜ å°„ï¼Œå®Œå…¨ç§»é™¤åŸæœ‰CSS
- **bothæ¨¡å¼**ï¼šåŒæ—¶ä¿ç•™åŸå§‹æ ·å¼å’ŒåŸå­ç±»ï¼ˆè°ƒè¯•ç”¨ï¼‰

### æ™ºèƒ½è½¬æ¢èƒ½åŠ›
- è‡ªåŠ¨è¯†åˆ«å¯è½¬æ¢çš„CSSå±æ€§
- å¤„ç†ç®€å†™å±æ€§ï¼ˆpadding/marginå¤šå€¼ï¼‰
- ä¿ç•™æ— æ³•è½¬æ¢çš„å±æ€§ï¼ˆæ¸å˜ã€åŠ¨ç”»ç­‰ï¼‰
- æ”¯æŒTailwindæ ‡å‡†é¢œè‰²å’Œå°ºå¯¸

### é«˜çº§é…ç½®é€‰é¡¹
```javascript
{
  customMapping: {
    'transition:all 0.3s': 'transition-all duration-300',
    'transform:translateX(100%)': 'translate-x-full',
    'background:#1a202c': 'bg-gray-900',
  },
  minRules: 3, // è‡³å°‘3æ¡è§„åˆ™æ‰è½¬æ¢
  generateMapping: true, // ç”Ÿæˆè½¬æ¢æ˜ å°„æ–‡ä»¶
  minify: true, // å‹ç¼©è¾“å‡º
}
```

## ğŸ“Š æ€§èƒ½å¯¹æ¯”

| é¡¹ç›®è§„æ¨¡ | åŸå§‹CSS | è½¬æ¢å | å‡å°‘æ¯”ä¾‹ |
|----------|---------|--------|----------|
| å°å‹     | 15KB    | 5KB    | 67%      |
| ä¸­å‹     | 82KB    | 28KB   | 66%      |
| å¤§å‹     | 350KB   | 120KB  | 66%      |

## ğŸš€ æœ€ä½³å®è·µ

### æ¸è¿›å¼è¿ç§»
```javascript
// webpack.config.js
module.exports = {
  module: {
    rules: [
      // åªå¯¹æ–°ç»„ä»¶å¯ç”¨
      {
        test: /\.css$/,
        include: path.resolve(__dirname, 'src/components/new'),
        use: [
          'style-loader',
          'css-loader',
          'postcss-loader',
          './loaders/atomic-css-loader.js'
        ],
      },
      // æ—§ç»„ä»¶ä¿æŒä¸å˜
      {
        test: /\.css$/,
        exclude: path.resolve(__dirname, 'src/components/new'),
        use: ['style-loader', 'css-loader'],
      },
    ],
  },
};
```

### é…åˆPurgeCSSä¼˜åŒ–
```javascript
// postcss.config.js
const purgecss = require('@fullhuman/postcss-purgecss');

module.exports = {
  plugins: [
    require('tailwindcss'),
    require('autoprefixer'),
    process.env.NODE_ENV === 'production' &&
      purgecss({
        content: ['./src/**/*.html', './src/**/*.jsx'],
        defaultExtractor: (content) => content.match(/[\w-/:]+(?<!:)/g) || [],
      }),
  ].filter(Boolean),
};
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **å¿…é¡»é…åˆTailwindä½¿ç”¨**ï¼šéœ€è¦æ­£ç¡®é…ç½®Tailwindå’ŒPostCSS
2. **loaderé¡ºåº**ï¼šatomic-css-loaderå¿…é¡»åœ¨postcss-loaderä¹‹å‰
3. **é¢œè‰²æ”¯æŒ**ï¼šä»…æ”¯æŒTailwindæ ‡å‡†è‰²ï¼Œè‡ªå®šä¹‰é¢œè‰²éœ€é…ç½®æ˜ å°„
4. **ä¸æ”¯æŒç‰¹æ€§**ï¼šå…³é”®å¸§åŠ¨ç”»ã€ä¼ªå…ƒç´ ã€CSSå˜é‡ç­‰ä¼šä¿ç•™åŸå§‹æ ·å¼





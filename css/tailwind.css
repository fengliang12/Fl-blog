@import 'tailwindcss';
@plugin "@tailwindcss/forms";
@plugin '@tailwindcss/typography';
@source '../node_modules/pliny';
@custom-variant dark (&:where(.dark, .dark *));

/* Core theme configuration */
@theme {
  /* Font families */
  --font-sans: var(--font-space-grotesk), ui-sans-serif, system-ui, sans-serif, 'Apple Color Emoji',
    'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';

  /* Colors */
  /* Copied from https://tailwindcss.com/docs/theme#default-theme-variable-reference */
  --color-primary-50: #f1f6ff;
  --color-primary-100: #e0ecfe;
  --color-primary-200: #bed6fb;
  --color-primary-300: #96b8ee;
  --color-primary-400: #6f9cd9;
  --color-primary-500: #4e7fbf;
  --color-primary-600: #3c689f;
  --color-primary-700: #2e527f;
  --color-primary-800: #253f5f;
  --color-primary-900: #1a2b40;
  --color-primary-950: #101a28;

  --color-gray-50: #f8fbff;
  --color-gray-100: #eef3f9;
  --color-gray-200: #e0e6ec;
  --color-gray-300: #cad0d8;
  --color-gray-400: #a7b0ba;
  --color-gray-500: #86909b;
  --color-gray-600: #6a7580;
  --color-gray-700: #505a64;
  --color-gray-800: #374049;
  --color-gray-900: #212730;
  --color-gray-950: #14181d;

  /* Line heights */
  --line-height-11: 2.75rem;
  --line-height-12: 3rem;
  --line-height-13: 3.25rem;
  --line-height-14: 3.5rem;

  /* Z-index values */
  --z-60: 60;
  --z-70: 70;
  --z-80: 80;
}

/*
  The default border color has changed to `currentColor` in Tailwind CSS v4,
  so we've added these compatibility styles to make sure everything still
  looks the same as it did with Tailwind CSS v3.

  If we ever want to remove these styles, we need to add an explicit border
  color utility to any element that depends on these defaults.
*/
@layer base {
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    border-color: var(--color-gray-200, currentColor);
  }

  a,
  button {
    outline-color: var(--color-primary-500);
  }

  a:focus-visible,
  button:focus-visible {
    outline: 2px solid;
    border-radius: var(--radius-sm);
    outline-color: var(--color-primary-500);
  }
}

@layer utilities {
  .prose {
    & a {
      color: var(--color-primary-500);
      &:hover {
        color: var(--color-primary-600);
      }
      & code {
        color: var(--color-primary-400);
      }
    }
    & :where(h1, h2) {
      font-weight: 700;
      letter-spacing: var(--tracking-tight);
    }
    & h3 {
      font-weight: 600;
    }
    & :where(code):not(pre code) {
      color: var(--color-indigo-500);
    }
  }

  .prose-invert {
    & a {
      color: var(--color-primary-500);
      &:hover {
        color: var(--color-primary-400);
      }
      & code {
        color: var(--color-primary-400);
      }
    }
    & :where(h1, h2, h3, h4, h5, h6) {
      color: var(--color-gray-100);
    }
  }
  .nav-pill {
    background-image: linear-gradient(120deg, rgba(255, 255, 255, 0.92), rgba(235, 244, 255, 0.95));
    border-radius: 9999px;
    border: 3px solid rgba(46, 82, 127, 0.25);
    box-shadow: 0 8px 18px rgba(46, 82, 127, 0.2);
    backdrop-filter: blur(6px);
    transition: transform 150ms ease, box-shadow 150ms ease;
  }
  .nav-pill:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 24px rgba(46, 82, 127, 0.3);
  }
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  .app-gradient {
    background-image: linear-gradient(135deg, #f1f6ff 0%, #e6f1fa 45%, #e4f6ff 100%);
  }
  .halo-bg {
    background-image:
      radial-gradient(280px 280px at 10% 15%, rgba(121, 170, 214, 0.35) 0%, rgba(121, 170, 214, 0) 60%),
      radial-gradient(220px 220px at 80% 15%, rgba(167, 209, 255, 0.45) 0%, rgba(167, 209, 255, 0) 65%),
      radial-gradient(240px 240px at 25% 80%, rgba(161, 215, 206, 0.35) 0%, rgba(161, 215, 206, 0) 68%),
      radial-gradient(280px 280px at 90% 75%, rgba(127, 156, 209, 0.4) 0%, rgba(127, 156, 209, 0) 65%);
    background-repeat: no-repeat;
  }
  .cartoon-card {
    position: relative;
    border-radius: 1.1rem;
    border: 3px solid #2f4f5f;
    background-color: #f8fbff;
    box-shadow: 7px 9px 0 #b38b58;
  }
  .frosted-panel {
    background-color: rgba(247, 250, 255, 0.9);
    border-radius: 1.75rem;
    border: 3px solid rgba(47, 79, 95, 0.15);
    box-shadow: 0 25px 45px rgba(54, 78, 123, 0.12);
    backdrop-filter: blur(12px);
  }
  .cartoon-button {
    background-image: linear-gradient(120deg, #f6fbff, #e4f2fb);
    border-radius: 9999px;
    border: 2px solid rgba(47, 79, 95, 0.25);
    box-shadow: 0 6px 14px rgba(40, 69, 90, 0.18);
    transition: transform 120ms ease, box-shadow 120ms ease;
  }
  .cartoon-button:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 20px rgba(40, 69, 90, 0.25);
  }
  .outline-button {
    border: 3px dashed rgba(46, 82, 127, 0.5);
    border-radius: 9999px;
    padding: 0.75rem 1.5rem;
    box-shadow: 0 12px 25px rgba(46, 82, 127, 0.15);
    background-color: rgba(248, 251, 255, 0.95);
  }
  .rainbow-text {
    background: linear-gradient(90deg, #7cb0e8, #6ed2cf, #6d9ce6, #8bc1ff);
    -webkit-background-clip: text;
    color: transparent;
  }
  .sparkle-grid {
    background-image: url("data:image/svg+xml,%3Csvg width='160' height='160' viewBox='0 0 160 160' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='3' height='3' rx='1.5' fill='%23A5C4E1'/%3E%3Crect x='80' width='3' height='3' rx='1.5' fill='%23C9E3FF'/%3E%3Crect y='80' width='3' height='3' rx='1.5' fill='%2390D4CF'/%3E%3Crect x='80' y='80' width='3' height='3' rx='1.5' fill='%23F5DCC3'/%3E%3C/svg%3E");
    background-repeat: repeat;
    opacity: 0.2;
  }
  .floating-bubble {
    position: absolute;
    border-radius: 50%;
    opacity: 0.35;
    filter: blur(0.5px);
    animation: floaty 12s ease-in-out infinite;
  }
  .floating-bubble:nth-child(2) {
    animation-duration: 16s;
    animation-delay: 2s;
  }
  @keyframes floaty {
    0% {
      transform: translate3d(0, 0, 0);
    }
    50% {
      transform: translate3d(20px, -25px, 0);
    }
    100% {
      transform: translate3d(0, 0, 0);
    }
  }
  .mermaid svg {
    max-width: 100%;
    height: auto;
  }
}

.task-list-item::before {
  @apply hidden;
}

.task-list-item {
  @apply list-none;
}

.footnotes {
  @apply mt-12 border-t border-gray-200 pt-8 dark:border-gray-700;
}

.data-footnote-backref {
  @apply no-underline;
}

.csl-entry {
  @apply my-5;
}

.no-scrollbar::-webkit-scrollbar {
  display: none;
}

.no-scrollbar {
  -ms-overflow-style: none; /* IE and Edge */
  scrollbar-width: none; /* Firefox */
}

/* https://stackoverflow.com/questions/61083813/how-to-avoid-internal-autofill-selected-style-to-be-applied */
input:-webkit-autofill,
input:-webkit-autofill:focus {
  transition:
    background-color 600000s 0s,
    color 600000s 0s;
}

.katex-display {
  overflow: auto hidden;
}

.content-header-link {
  opacity: 0;
  margin-left: -24px;
  padding-right: 4px;
}

.content-header:hover .content-header-link,
.content-header-link:hover {
  opacity: 1;
}

.linkicon {
  display: inline-block;
  vertical-align: middle;
}
